<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Astro Runner ‚Äî Mini App</title>
<style>
  :root {
    --bg-dark: #070a12;
    --bg-panel: #0b1220;
    --text-main: #eaf4ff;
    --text-muted: #9fb0c3;
    --accent: #a855f7;
    --accent-hover: #c084fc;
    --ok: #9be28a;
    --err: #ff7b7b;
  }

  * { box-sizing: border-box; }

  body {
    margin: 0;
    background: radial-gradient(1200px 600px at 50% -10%, #121a2d 0, var(--bg-dark) 60%);
    color: var(--text-main);
    font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    text-align: center;
    overflow: hidden;
  }

  a { color: #66ccff; text-decoration: none; }

  /* ---------- DASHBOARD ---------- */
  #dashboard {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 100vh;
  }

  .dashboard-box {
    background: var(--bg-panel);
    border-radius: 20px;
    padding: 24px 30px;
    box-shadow: 0 0 25px rgba(168, 85, 247, 0.25);
    text-align: center;
    width: 380px;
  }

  .avatar {
    width: 80px;
    height: 80px;
    border-radius: 50%;
    margin-bottom: 10px;
    box-shadow: 0 0 15px rgba(168, 85, 247, 0.35);
  }

  .username {
    font-size: 1.2rem;
    font-weight: 600;
  }

  .status {
    color: var(--ok);
    margin-bottom: 16px;
  }

  .stats {
    display: flex;
    justify-content: center;
    gap: 16px;
    margin-bottom: 18px;
  }

  .stat-box {
    background: rgba(168, 85, 247, 0.08);
    border: 1px solid rgba(168, 85, 247, 0.35);
    border-radius: 12px;
    padding: 10px 18px;
  }

  .stat-value {
    color: var(--accent);
    font-size: 1.4rem;
    font-weight: 700;
  }

  .stat-label {
    color: var(--text-muted);
    font-size: 0.8rem;
  }

  .buttons {
    display: flex;
    justify-content: center;
    gap: 12px;
  }

  .btn {
    background: var(--accent);
    color: #fff;
    border: none;
    border-radius: 14px;
    padding: 14px 22px;
    font-weight: 800;
    cursor: pointer;
    font-size: 1rem;
    transition: background 0.2s ease-in-out, transform 0.15s ease-in-out;
  }

  .btn:hover {
    background: var(--accent-hover);
    transform: scale(1.03);
  }

  /* ---------- GAME LAYOUT ---------- */
  #gameWrap { display: none; height: 100vh; }
  #hud { display: none; gap: 12px; align-items: center; justify-content: center; padding: 10px; }
  .chip { background: rgba(168, 85, 247, 0.08); border: 1px solid rgba(168, 85, 247, 0.35); color: var(--accent); border-radius: 999px; padding: 8px 12px; font-weight: 700; }
  canvas#game { display: block; width: 100vw; height: calc(100vh - 120px); border: 0; background: transparent; }

  dialog { border: none; border-radius: 16px; background: var(--bg-panel); color: var(--text-main); padding: 22px; max-width: min(92vw,420px); }
  dialog::backdrop { background: rgba(0,0,0,.6); }
</style>
</head>
<body>

<!-- DASHBOARD -->
<section id="dashboard">
  <h1 style="color:var(--accent)">üöÄ ASTRO RUNNER</h1>
  <div class="dashboard-box">
    <img src="https://i.postimg.cc/qNb0Js7F/astro-runner-thumb.png" class="avatar" alt="avatar">
    <div class="username" id="userName">@Player</div>
    <div class="status">‚óè Connected</div>

    <div class="stats">
      <div class="stat-box"><div class="stat-value" id="bestScore">0</div><div class="stat-label">BEST</div></div>
      <div class="stat-box"><div class="stat-value" id="gamesPlayed">0</div><div class="stat-label">GAMES</div></div>
      <div class="stat-box"><div class="stat-value" id="lastScore">0</div><div class="stat-label">LAST</div></div>
    </div>

    <div class="buttons">
      <button class="btn" id="startBtn">Start Game</button>
      <button class="btn" id="leaderboardBtn">Leaderboard</button>
    </div>
  </div>
</section>

<!-- GAME -->
<section id="gameWrap">
  <div id="hud">
    <div class="chip" id="score">Score: 0</div>
    <div class="chip" id="best">Best: 0</div>
    <button class="btn" id="pause">Pause</button>
  </div>
  <canvas id="game" width="960" height="540"></canvas>
</section>

<dialog id="over">
  <h3>Game Over</h3>
  <p id="final">Score: 0</p>
  <button class="btn" id="again">Play Again</button>
</dialog>

<dialog id="leaderboardModal">
  <h3>Leaderboard</h3>
  <table id="leaderboardTable" style="width:100%;text-align:left;color:var(--text-main);border-collapse:collapse;">
    <tr><th>Player</th><th>Wallet</th><th>Score</th></tr>
  </table>
  <button onclick="closeLeaderboard()" class="btn" style="margin-top:10px;">Close</button>
</dialog>

<script>
/********************
 * ASTRO RUNNER GAME
 ********************/
let cvs, ctx, t=0, dt=0, last=0, raf=0, playing=false, paused=false;
let player={x:0,y:0,r:16,vx:0,vy:0,dash:0,dashCD:0}, obstacles=[], stars=[];
let score=0, best=Number(localStorage.getItem('astroBest')||0);

function initGame(){
  cvs=document.getElementById('game');
  ctx=cvs.getContext('2d');
  resize();
  for(let i=0;i<160;i++) stars.push({x:Math.random()*innerWidth,y:Math.random()*innerHeight,z:Math.random()*1.5+0.2});
  reset();
}
function reset(){
  obstacles.length=0; score=0;
  player.x=innerWidth*0.15; player.y=innerHeight*0.5;
  player.vx=player.vy=player.dash=player.dashCD=0;
}
function spawnObstacle(){
  const size=20+Math.random()*30, y=Math.random()*(innerHeight-60)+30;
  obstacles.push({x:innerWidth+20,y:y-size,w:size*2,h:size*2});
}
function update(time){
  dt=(time-last)/1000||0; last=time; if(paused||!playing){raf=requestAnimationFrame(update);return draw();}
  t+=dt; if(Math.random()<0.02) spawnObstacle();
  player.vx*=0.92; player.vy*=0.92; player.x+=player.vx*dt*60; player.y+=player.vy*dt*60;
  for(const s of stars){s.x-=(1.5+s.z)*100*dt;if(s.x<-2){s.x=innerWidth+50;s.y=Math.random()*innerHeight;}}
  for(const o of obstacles){o.x-=300*dt;} obstacles=obstacles.filter(o=>o.x>-40);
  for(const o of obstacles){if(rectCircle(o,player)) return endGame();}
  score+=dt*10; draw(); raf=requestAnimationFrame(update);
}
function draw(){
  ctx.clearRect(0,0,innerWidth,innerHeight);
  ctx.fillStyle='#0a1222';ctx.fillRect(0,0,innerWidth,innerHeight);
  ctx.fillStyle='#2d3360';for(const s of stars)ctx.fillRect(s.x,s.y,2,2);
  ctx.fillStyle=varAccent();ctx.beginPath();ctx.arc(player.x,player.y,player.r,0,Math.PI*2);ctx.fill();
  ctx.fillStyle='#a855f7';for(const o of obstacles)ctx.fillRect(o.x,o.y,o.w,o.h);
  document.getElementById('score').textContent='Score: '+Math.floor(score);
}
function rectCircle(o,p){const cx=Math.max(o.x,Math.min(p.x,o.x+o.w)),cy=Math.max(o.y,Math.min(p.y,o.y+o.h));const dx=p.x-cx,dy=p.y-cy;return dx*dx+dy*dy<p.r*p.r;}
function varAccent(){return getComputedStyle(document.documentElement).getPropertyValue('--accent');}
function startGame(){document.getElementById('dashboard').style.display='none';document.getElementById('gameWrap').style.display='block';playing=true;paused=false;last=performance.now();raf=requestAnimationFrame(update);}
function endGame(){playing=false;document.getElementById('final').textContent='Score: '+Math.floor(score);document.getElementById('over').showModal();saveStats();}
function saveStats(){const best=Math.max(localStorage.getItem('astroBest')||0,Math.floor(score));localStorage.setItem('astroBest',best);const games=(Number(localStorage.getItem('astroGames'))||0)+1;localStorage.setItem('astroGames',games);localStorage.setItem('astroLast',Math.floor(score));updateDashboard();}
function updateDashboard(){document.getElementById('bestScore').textContent=localStorage.getItem('astroBest')||0;document.getElementById('gamesPlayed').textContent=localStorage.getItem('astroGames')||0;document.getElementById('lastScore').textContent=localStorage.getItem('astroLast')||0;}
function resize(){cvs.width=innerWidth;cvs.height=innerHeight;}
window.onresize=resize;

// Leaderboard (local example)
function showLeaderboard(){const data=JSON.parse(localStorage.getItem('astroLeaderboard')||'[]');const table=document.getElementById('leaderboardTable');table.innerHTML='<tr><th>Player</th><th>Wallet</th><th>Score</th></tr>'+data.map(d=>`<tr><td>${d.handle}</td><td>${d.wallet}</td><td>${d.score}</td></tr>`).join('');document.getElementById('leaderboardModal').showModal();}
function closeLeaderboard(){document.getElementById('leaderboardModal').close();}

// Controls
document.getElementById('startBtn').onclick=()=>{startGame();};
document.getElementById('again').onclick=()=>{document.getElementById('over').close();startGame();};
document.getElementById('leaderboardBtn').onclick=showLeaderboard;

// Init
updateDashboard();initGame();
</script>
</body>
</html>
